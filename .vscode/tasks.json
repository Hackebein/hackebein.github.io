{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Live-Edit",
      "type": "shell",
      "command": "xlog",
      "args": [
        "--bind", "0.0.0.0:8080",
        "--source", "page",
        "--custom_before_view", "_header.md",
        "--custom_after_view", "_footer.md",
        "--custom_css", "/fancy.css",
        "--sitename", "Hackebein",
        "--sitemap.domain", "hackebein.de",
        "--rss.domain", "hackebein.de",
        "--og.domain", "hackebein.de",
        "--twitter.username", "@hackebein",
        "--gpg", "17A1B2D91A47EE5023925E01EDA4CF550300BA42"
      ],
      "problemMatcher": []
    },
    {
      "label": "Build",
      "type": "shell",
      "command": "sh",
      "args": [
        "-c",
        "rm -rf output.new; cp -a page output.new && xlog --build . --source output.new --custom_before_view _header.md --custom_after_view _footer.md --custom_css /fancy.css --sitename 'Hackebein' --sitemap.domain 'hackebein.de' --rss.domain 'hackebein.de' --og.domain 'hackebein.de' --twitter.username '@hackebein' --custom_head _head.html && find output.new -name *.md -delete; find output.new -name *.md.pgp -delete; rm output.new/_head.html; mv output output.old; mv output.new output; rm -rf output.old"
      ],
      "problemMatcher": []
    },
    {
      "label": "Watch-and-Build",
      "type": "shell",
      "command": "sh",
      "args": [
        "-c",
        "rm -rf output output.new; cp -a page output && xlog --build . --source output --custom_before_view _header.md --custom_after_view _footer.md --custom_css /fancy.css --sitename 'Hackebein' --sitemap.domain 'hackebein.de' --rss.domain 'hackebein.de' --og.domain 'hackebein.de' --twitter.username '@hackebein' --custom_head _head.html && find output -name *.md -delete; find output -name *.md.pgp -delete; rm output/_head.html; while inotifywait -r -e modify,create,delete,move page; do cp -a page output.new && xlog --build . --source output.new --custom_before_view _header.md --custom_after_view _footer.md --custom_css /fancy.css --sitename 'Hackebein' --sitemap.domain 'hackebein.de' --rss.domain 'hackebein.de' --og.domain 'hackebein.de' --twitter.username '@hackebein' --custom_head _head.html && find output.new -name *.md -delete; find output.new -name *.md.pgp -delete; rm output.new/_head.html; mv output output.old; mv output.new output; rm -rf output.old; done"
      ],
      "problemMatcher": []
    },
    {
      "label": "Serve-Output",
      "type": "shell",
      "command": "sh",
      "args": [
        "-c",
        "live-server --no-css-inject --entry-file=index.html --wait=100 output"
      ],
      "problemMatcher": []
    },
    {
      "label": "DNS-Push",
      "type": "shell",
      "command": "docker",
      "args": [
        "run",
        "--rm",
        "-it",
        "-v",
        "$(pwd)/dns:/dns",
        "-e",
        "OVH_CONSUMER_KEY",
        "-e",
        "OVH_APP_SECRET_KEY",
        "-e",
        "OVH_APP_KEY",
        "ghcr.io/stackexchange/dnscontrol",
        "push"
      ],
      "problemMatcher": []
    },
    {
      "label": "DNS-Preview",
      "type": "shell",
      "command": "docker",
      "args": [
        "run",
        "--rm",
        "-it",
        "-v",
        "$(pwd)/dns:/dns",
        "-e",
        "OVH_CONSUMER_KEY",
        "-e",
        "OVH_APP_SECRET_KEY",
        "-e",
        "OVH_APP_KEY",
        "ghcr.io/stackexchange/dnscontrol",
        "preview"
      ],
      "problemMatcher": []
    }
  ]
}